{"ast":null,"code":"var _jsxFileName = \"/home/pedro/Documentos/projects/master-pizza/delivery-app-v2/src/pages/ShoppingCart/index.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport { useAlert } from \"react-alert\";\nimport { changeCommaForPoint, getIdCompany } from \"../../helpers.js\";\nimport API from \"../../server/api.js\";\nimport Navbar from \"../../components/Navbar\";\nimport Loading from \"../../components/Loading\";\nimport ModalAddressClient from \"../../components/ModalAddressClient\";\nimport Header from \"../../components/Header\";\nimport Footer from \"../../components/Footer\";\nimport pie_default from \"../../images/pie.png\";\nimport empty_default from \"../../images/empty_product.jpeg\";\nimport empty_cart from \"../../images/empty-cart.png\";\nimport \"../../index.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst ShoppingCart = () => {\n  _s();\n\n  const ID_COMPANY = getIdCompany();\n  const idClient = localStorage.getItem('@masterpizza-delivery-app/id_client');\n  const [dataProducts, setDataProducts] = useState([]);\n  const [priceTotal, setPriceTotal] = useState(0);\n  const [loadingFlag, setLoadingFlag] = useState(false);\n  const [nameCoupom, setNameCoupom] = useState(null);\n  const [showModalAddress, setShowModalAddress] = useState(false);\n  const [coupom, setCoupom] = useState(null);\n  const [valueDiscount, setValueDiscount] = useState(0);\n  const [quantityItemCart, setQuantityItemCart] = useState(0);\n  const alert = useAlert();\n  useEffect(() => {\n    setLoadingFlag(true);\n    getCartProduct();\n    setLoadingFlag(false);\n  }, []);\n\n  const getCartProduct = async () => {\n    setLoadingFlag(true);\n\n    try {\n      const response = await API.get(\"cart_product/\" + idClient + \"/\" + ID_COMPANY);\n      let array = [];\n      let price = 0;\n      let quantity = 0;\n      response.data.forEach(product => {\n        if (product.id_product_fk && product.id_product_fk2) {\n          array.push({\n            id: product.id,\n            name: product.observation,\n            size: product.size,\n            price: product.price_item_order,\n            quantity: product.quantity_item,\n            image: pie_default,\n            is_product_mister: true\n          });\n        } else {\n          array.push({\n            id: product.id,\n            name: product.name_product || product.name,\n            size: product.size,\n            price: product.price_item_order,\n            quantity: product.quantity_item,\n            image: product.image ? `https://api-master-pizza.herokuapp.com/${product.image}` : empty_default,\n            is_product_mister: false\n          });\n        }\n\n        price += product.price_item_order;\n        quantity += product.quantity_item;\n      });\n      setPriceTotal(price);\n      setQuantityItemCart(quantity);\n      setDataProducts(array);\n      setLoadingFlag(false);\n    } catch (error) {\n      setLoadingFlag(false);\n      alert.error('Erro ao tentar acessar carrinho. Tente novamente!');\n    }\n  };\n\n  const deleteItemCart = async id => {\n    setLoadingFlag(true);\n\n    try {\n      const response = await API.delete(\"cart_product/\" + id);\n\n      if (response.status === 200) {\n        getCartProduct();\n        setLoadingFlag(false);\n        alert.success(response.data.message);\n      } else {\n        setLoadingFlag(false);\n        alert.error(response.data.message);\n      }\n    } catch (error) {\n      setLoadingFlag(false);\n      alert.error(\"Error ao tentar deletar item. Tente novamente!\");\n    }\n  };\n\n  const getCoupomChangeName = async () => {\n    if (nameCoupom) {\n      API.get(\"coupom/\" + nameCoupom + \"/\" + ID_COMPANY).then(response => {\n        if (response.status === 200) {\n          if (response.data) {\n            setCoupom(response.data[0]);\n            setValueDiscount(response.data[0].value_discount);\n          }\n        }\n      }).catch(error => {\n        alert.error(\"Erro de comunicação com o servidor ao tentar buscar cupom.\");\n      });\n    } else {\n      alert.error(\"Informe um cupom válido para poder aplicar!\");\n    }\n  };\n\n  const finishCart = async () => {\n    //ATUALIZAR COLUNA -> completed_purchase\n    try {\n      const response = await API.put(\"cart_status\", {\n        idClient: idClient,\n        idCompany: ID_COMPANY\n      });\n      return response.status === 200 ? true : false;\n    } catch (error) {\n      alert.error('Erro ao tentar finalizar pedido. Tente novamente!');\n    }\n  };\n\n  const finishOrder = async formAddress => {\n    setLoadingFlag(true);\n\n    try {\n      setShowModalAddress(!showModalAddress);\n      let price_order = 0;\n      let arrayIdsProducts = [];\n      dataProducts.forEach(item => {\n        price_order += item.price;\n        arrayIdsProducts.push(item.id);\n      });\n      let address = `Rua: ${formAddress.street};N°: ${formAddress.number_address};Bairro: ${formAddress.district}`;\n      const responseFinishOrder = await API.post(\"createOrder\", {\n        price: price_order - valueDiscount,\n        price_final: price_order - valueDiscount,\n        status_order: 0,\n        is_pdv: false,\n        observation: formAddress.observation || null,\n        address_client: String(address),\n        id_coupom_fk: formAddress.coupom ? formAddress.coupom.id_coupom : coupom ? coupom.id_coupom : null,\n        id_client_fk: idClient,\n        id_company: ID_COMPANY,\n        idsFormPayment: [formAddress.form_payment]\n      });\n\n      if (responseFinishOrder.status === 200) {\n        const idOrder = responseFinishOrder.data.id_order;\n        const responseProductOrder = await API.post(\"createProductsOrder\", {\n          id_order: idOrder,\n          id_company: ID_COMPANY,\n          ids_products: arrayIdsProducts\n        });\n\n        if (responseProductOrder.status === 200) {\n          const res = await finishCart();\n          setLoadingFlag(false);\n\n          if (res) {\n            alert.success('Pedido enviado com sucesso! Acompanhe o andamento no seu perfil.');\n            setTimeout(() => {\n              window.location.href = \"/profile\";\n            }, 1000);\n          } else {\n            alert.error('Erro no envio do pedido. Tente novamente!');\n          }\n        } else {\n          setLoadingFlag(false);\n          alert.error('Erro no envio do pedido. Tente novamente!');\n        }\n      } else {\n        setLoadingFlag(false);\n        alert.error('Erro no envio do pedido. Tente novamente!');\n      }\n    } catch (error) {\n      setLoadingFlag(false);\n      alert.error('Erro no envio do pedido. Tente novamente!');\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: !loadingFlag ? /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(Navbar, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(Header, {\n        title: 'Meu carrinho'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"px-4 py-6 sm:px-0\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"rounded-lg h-96\",\n              children: dataProducts.length !== 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"container mx-auto mb-0 bg-gray-100\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex shadow-md my-5\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"w-3/4 bg-white px-10 py-5\",\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"flex mt-5 mb-5\",\n                      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                        className: \"font-semibold text-gray-600 text-xs uppercase w-2/5\",\n                        children: \"Produto\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 195,\n                        columnNumber: 23\n                      }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n                        className: \"font-semibold text-center text-gray-600 text-xs uppercase w-1/5 text-center\",\n                        children: \"Quantidade\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 196,\n                        columnNumber: 23\n                      }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n                        className: \"font-semibold text-center text-gray-600 text-xs uppercase w-1/5 text-center\",\n                        children: \"Pre\\xE7o\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 197,\n                        columnNumber: 23\n                      }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n                        className: \"font-semibold text-center text-gray-600 text-xs uppercase w-1/5 text-center\",\n                        children: \"Total\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 198,\n                        columnNumber: 23\n                      }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n                        className: \"font-semibold text-center text-gray-600 text-xs uppercase w-1/5 text-center\",\n                        children: \"A\\xE7\\xF5es\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 199,\n                        columnNumber: 17\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 194,\n                      columnNumber: 22\n                    }, this), dataProducts.map((product, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"flex items-center hover:bg-gray-100 -mx-8 px-6 py-5\",\n                      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"flex w-2/5\",\n                        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"w-20\",\n                          children: /*#__PURE__*/_jsxDEV(\"img\", {\n                            className: \"h-24 w-24\",\n                            src: product.image,\n                            alt: \"imgProduct\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 206,\n                            columnNumber: 31\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 205,\n                          columnNumber: 29\n                        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"flex flex-col justify-between ml-5\",\n                          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                            className: \"font-bold text-x1\",\n                            children: product.name\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 209,\n                            columnNumber: 31\n                          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                            onClick: () => deleteItemCart(product.id),\n                            className: \"ml-5 font-semibold hover:text-red-500 text-gray-500 text-xs\",\n                            children: \"Remove\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 210,\n                            columnNumber: 31\n                          }, this)]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 208,\n                          columnNumber: 29\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 204,\n                        columnNumber: 27\n                      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"flex justify-center w-1/5\",\n                        children: /*#__PURE__*/_jsxDEV(\"p\", {\n                          className: \"text-lg text-black text-center\",\n                          children: product.quantity\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 214,\n                          columnNumber: 29\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 213,\n                        columnNumber: 25\n                      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                        className: \"text-center w-1/5 font-semibold text-sm\",\n                        children: [\"R$ \", changeCommaForPoint(product.price / product.quantity)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 218,\n                        columnNumber: 25\n                      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                        className: \"text-center w-1/5 font-semibold text-sm\",\n                        children: [\"R$ \", changeCommaForPoint(product.price)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 219,\n                        columnNumber: 25\n                      }, this)]\n                    }, index, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 203,\n                      columnNumber: 24\n                    }, this)), /*#__PURE__*/_jsxDEV(\"a\", {\n                      href: \"/menu\",\n                      className: \"flex font-semibold text-indigo-600 text-sm mt-10\",\n                      children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n                        className: \"fill-current mr-2 text-indigo-600 w-4\",\n                        viewBox: \"0 0 448 512\",\n                        children: /*#__PURE__*/_jsxDEV(\"path\", {\n                          d: \"M134.059 296H436c6.627 0 12-5.373 12-12v-56c0-6.627-5.373-12-12-12H134.059v-46.059c0-21.382-25.851-32.09-40.971-16.971L7.029 239.029c-9.373 9.373-9.373 24.569 0 33.941l86.059 86.059c15.119 15.119 40.971 4.411 40.971-16.971V296z\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 224,\n                          columnNumber: 101\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 224,\n                        columnNumber: 24\n                      }, this), \"Continuar comprando\"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 223,\n                      columnNumber: 22\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 193,\n                    columnNumber: 18\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    id: \"summary\",\n                    className: \"w-1/4 px-8 py-10\",\n                    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n                      className: \"font-semibold text-2xl border-b pb-5\",\n                      children: \"Resumo\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 230,\n                      columnNumber: 22\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"flex justify-between mt-10 mb-2\",\n                      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                        className: \"font-semibold text-sm\",\n                        children: [\"Item(s) \", quantityItemCart]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 232,\n                        columnNumber: 25\n                      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                        className: \"font-semibold text-sm\",\n                        children: [\"R$ \", changeCommaForPoint(priceTotal)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 233,\n                        columnNumber: 25\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 231,\n                      columnNumber: 22\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"py-2\",\n                      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                        children: \"Possui cupom ?\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 236,\n                        columnNumber: 23\n                      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                        type: \"text\",\n                        className: \"mt-1 block border border-grey-light w-full p-2 rounded mb-1\",\n                        placeholder: \"Cupom\",\n                        onChange: e => setNameCoupom(e.target.value)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 237,\n                        columnNumber: 25\n                      }, this), valueDiscount !== 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"mt-10\",\n                        children: /*#__PURE__*/_jsxDEV(\"p\", {\n                          className: \"text-md text-black font-semibold\",\n                          children: [\"Voc\\xEA ter\\xE1 um desconto de R$\", changeCommaForPoint(valueDiscount)]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 246,\n                          columnNumber: 38\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 245,\n                        columnNumber: 37\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 235,\n                      columnNumber: 22\n                    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                      className: \"w-full text-center py-2 rounded-md bg-red text-white\",\n                      onClick: getCoupomChangeName,\n                      children: \"Aplicar\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 253,\n                      columnNumber: 22\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"border-t mt-5\",\n                      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"flex font-semibold justify-between py-6 text-sm\",\n                        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                          children: \"Total da conta\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 258,\n                          columnNumber: 26\n                        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                          children: [\"R$ \", changeCommaForPoint(priceTotal - valueDiscount)]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 259,\n                          columnNumber: 26\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 257,\n                        columnNumber: 24\n                      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                        className: \"bg-green w-full text-center py-2 rounded-md text-white\",\n                        onClick: () => setShowModalAddress(true),\n                        children: \"Finalizar pedido\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 261,\n                        columnNumber: 24\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 256,\n                      columnNumber: 22\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 229,\n                    columnNumber: 18\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 192,\n                  columnNumber: 17\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 191,\n                columnNumber: 19\n              }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"w-full m-auto\",\n                children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"w-full text-center text-black font-bold text-xl\",\n                  children: \"Seu carrinho est\\xE1 v\\xE1zio!\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 274,\n                  columnNumber: 29\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex justify-center mt-10\",\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    children: /*#__PURE__*/_jsxDEV(\"img\", {\n                      src: empty_cart,\n                      className: \"rounded-full h-24 w-24\",\n                      alt: \"cart-empty\",\n                      className: \"h-16 w-16 mt-12\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 279,\n                      columnNumber: 33\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 278,\n                    columnNumber: 32\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 277,\n                  columnNumber: 31\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 273,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 188,\n              columnNumber: 16\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 187,\n            columnNumber: 14\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 186,\n          columnNumber: 8\n        }, this), /*#__PURE__*/_jsxDEV(ModalAddressClient, {\n          show: showModalAddress,\n          close: () => setShowModalAddress(false),\n          onFinishOrder: data => finishOrder(data)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 288,\n          columnNumber: 8\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 294,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 6\n    }, this) : /*#__PURE__*/_jsxDEV(Loading, {\n      time: 5000\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 297,\n      columnNumber: 6\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 179,\n    columnNumber: 3\n  }, this);\n};\n\n_s(ShoppingCart, \"yDltu7mKT5iIuhUn5Lo9nyNtZz8=\", false, function () {\n  return [useAlert];\n});\n\n_c = ShoppingCart;\nexport default ShoppingCart;\n\nvar _c;\n\n$RefreshReg$(_c, \"ShoppingCart\");","map":{"version":3,"sources":["/home/pedro/Documentos/projects/master-pizza/delivery-app-v2/src/pages/ShoppingCart/index.js"],"names":["React","useState","useEffect","useAlert","changeCommaForPoint","getIdCompany","API","Navbar","Loading","ModalAddressClient","Header","Footer","pie_default","empty_default","empty_cart","ShoppingCart","ID_COMPANY","idClient","localStorage","getItem","dataProducts","setDataProducts","priceTotal","setPriceTotal","loadingFlag","setLoadingFlag","nameCoupom","setNameCoupom","showModalAddress","setShowModalAddress","coupom","setCoupom","valueDiscount","setValueDiscount","quantityItemCart","setQuantityItemCart","alert","getCartProduct","response","get","array","price","quantity","data","forEach","product","id_product_fk","id_product_fk2","push","id","name","observation","size","price_item_order","quantity_item","image","is_product_mister","name_product","error","deleteItemCart","delete","status","success","message","getCoupomChangeName","then","value_discount","catch","finishCart","put","idCompany","finishOrder","formAddress","price_order","arrayIdsProducts","item","address","street","number_address","district","responseFinishOrder","post","price_final","status_order","is_pdv","address_client","String","id_coupom_fk","id_coupom","id_client_fk","id_company","idsFormPayment","form_payment","idOrder","id_order","responseProductOrder","ids_products","res","setTimeout","window","location","href","length","map","index","e","target","value"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA2BC,SAA3B,QAA4C,OAA5C;AACA,SAASC,QAAT,QAAyB,aAAzB;AACA,SAASC,mBAAT,EAA8BC,YAA9B,QAAkD,kBAAlD;AACA,OAAOC,GAAP,MAAgB,qBAAhB;AACA,OAAOC,MAAP,MAAmB,yBAAnB;AACA,OAAOC,OAAP,MAAoB,0BAApB;AACA,OAAOC,kBAAP,MAA+B,qCAA/B;AACA,OAAOC,MAAP,MAAmB,yBAAnB;AACA,OAAOC,MAAP,MAAmB,yBAAnB;AACA,OAAOC,WAAP,MAAwB,sBAAxB;AACA,OAAOC,aAAP,MAA0B,iCAA1B;AACA,OAAOC,UAAP,MAAuB,6BAAvB;AACA,OAAO,iBAAP;;;AACA,MAAMC,YAAY,GAAG,MAAM;AAAA;;AAC1B,QAAMC,UAAU,GAAGX,YAAY,EAA/B;AACA,QAAMY,QAAQ,GAAIC,YAAY,CAACC,OAAb,CAAqB,qCAArB,CAAlB;AAEA,QAAM,CAACC,YAAD,EAAeC,eAAf,IAAkCpB,QAAQ,CAAC,EAAD,CAAhD;AACA,QAAM,CAACqB,UAAD,EAAaC,aAAb,IAA8BtB,QAAQ,CAAC,CAAD,CAA5C;AACA,QAAM,CAACuB,WAAD,EAAcC,cAAd,IAAgCxB,QAAQ,CAAC,KAAD,CAA9C;AACA,QAAM,CAACyB,UAAD,EAAaC,aAAb,IAA8B1B,QAAQ,CAAC,IAAD,CAA5C;AACA,QAAM,CAAC2B,gBAAD,EAAmBC,mBAAnB,IAA0C5B,QAAQ,CAAC,KAAD,CAAxD;AACA,QAAM,CAAC6B,MAAD,EAASC,SAAT,IAAsB9B,QAAQ,CAAC,IAAD,CAApC;AACA,QAAM,CAAC+B,aAAD,EAAgBC,gBAAhB,IAAoChC,QAAQ,CAAC,CAAD,CAAlD;AACA,QAAM,CAACiC,gBAAD,EAAmBC,mBAAnB,IAA0ClC,QAAQ,CAAC,CAAD,CAAxD;AACA,QAAMmC,KAAK,GAAGjC,QAAQ,EAAtB;AAEAD,EAAAA,SAAS,CAAC,MAAM;AACfuB,IAAAA,cAAc,CAAC,IAAD,CAAd;AACAY,IAAAA,cAAc;AACdZ,IAAAA,cAAc,CAAC,KAAD,CAAd;AACA,GAJQ,EAIN,EAJM,CAAT;;AAMA,QAAMY,cAAc,GAAG,YAAY;AAClCZ,IAAAA,cAAc,CAAC,IAAD,CAAd;;AACA,QAAG;AACF,YAAMa,QAAQ,GAAG,MAAMhC,GAAG,CAACiC,GAAJ,CAAQ,kBAAgBtB,QAAhB,GAAyB,GAAzB,GAA6BD,UAArC,CAAvB;AACA,UAAIwB,KAAK,GAAG,EAAZ;AACA,UAAIC,KAAK,GAAG,CAAZ;AACA,UAAIC,QAAQ,GAAG,CAAf;AACAJ,MAAAA,QAAQ,CAACK,IAAT,CAAcC,OAAd,CAAuBC,OAAD,IAAa;AAClC,YAAGA,OAAO,CAACC,aAAR,IAAyBD,OAAO,CAACE,cAApC,EAAmD;AAClDP,UAAAA,KAAK,CAACQ,IAAN,CAAW;AACVC,YAAAA,EAAE,EAAEJ,OAAO,CAACI,EADF;AAEVC,YAAAA,IAAI,EAAEL,OAAO,CAACM,WAFJ;AAGVC,YAAAA,IAAI,EAAEP,OAAO,CAACO,IAHJ;AAIVX,YAAAA,KAAK,EAAEI,OAAO,CAACQ,gBAJL;AAKVX,YAAAA,QAAQ,EAAEG,OAAO,CAACS,aALR;AAMVC,YAAAA,KAAK,EAAE3C,WANG;AAOV4C,YAAAA,iBAAiB,EAAE;AAPT,WAAX;AASA,SAVD,MAUK;AACJhB,UAAAA,KAAK,CAACQ,IAAN,CAAW;AACVC,YAAAA,EAAE,EAAEJ,OAAO,CAACI,EADF;AAEVC,YAAAA,IAAI,EAAEL,OAAO,CAACY,YAAR,IAAwBZ,OAAO,CAACK,IAF5B;AAGVE,YAAAA,IAAI,EAAEP,OAAO,CAACO,IAHJ;AAIVX,YAAAA,KAAK,EAAEI,OAAO,CAACQ,gBAJL;AAKVX,YAAAA,QAAQ,EAAEG,OAAO,CAACS,aALR;AAMVC,YAAAA,KAAK,EAAEV,OAAO,CAACU,KAAR,GAAiB,0CAAyCV,OAAO,CAACU,KAAM,EAAxE,GAA0E1C,aANvE;AAOV2C,YAAAA,iBAAiB,EAAE;AAPT,WAAX;AASA;;AACDf,QAAAA,KAAK,IAAII,OAAO,CAACQ,gBAAjB;AACAX,QAAAA,QAAQ,IAAIG,OAAO,CAACS,aAApB;AACA,OAxBD;AAyBA/B,MAAAA,aAAa,CAACkB,KAAD,CAAb;AACAN,MAAAA,mBAAmB,CAACO,QAAD,CAAnB;AACArB,MAAAA,eAAe,CAACmB,KAAD,CAAf;AACAf,MAAAA,cAAc,CAAC,KAAD,CAAd;AACA,KAlCD,CAkCE,OAAMiC,KAAN,EAAY;AACbjC,MAAAA,cAAc,CAAC,KAAD,CAAd;AACAW,MAAAA,KAAK,CAACsB,KAAN,CAAY,mDAAZ;AACA;AACD,GAxCD;;AA0CA,QAAMC,cAAc,GAAG,MAAOV,EAAP,IAAc;AACjCxB,IAAAA,cAAc,CAAC,IAAD,CAAd;;AACH,QAAG;AACC,YAAMa,QAAQ,GAAG,MAAMhC,GAAG,CAACsD,MAAJ,CAAW,kBAAgBX,EAA3B,CAAvB;;AACA,UAAGX,QAAQ,CAACuB,MAAT,KAAoB,GAAvB,EAA2B;AAC1BxB,QAAAA,cAAc;AACXZ,QAAAA,cAAc,CAAC,KAAD,CAAd;AACAW,QAAAA,KAAK,CAAC0B,OAAN,CAAcxB,QAAQ,CAACK,IAAT,CAAcoB,OAA5B;AACH,OAJD,MAIK;AACFtC,QAAAA,cAAc,CAAC,KAAD,CAAd;AACCW,QAAAA,KAAK,CAACsB,KAAN,CAAYpB,QAAQ,CAACK,IAAT,CAAcoB,OAA1B;AACH;AACJ,KAVD,CAUC,OAAML,KAAN,EAAY;AACTjC,MAAAA,cAAc,CAAC,KAAD,CAAd;AACAW,MAAAA,KAAK,CAACsB,KAAN,CAAY,gDAAZ;AACA;AACF,GAhBH;;AAkBE,QAAMM,mBAAmB,GAAG,YAAY;AACzC,QAAGtC,UAAH,EAAc;AACbpB,MAAAA,GAAG,CAACiC,GAAJ,CAAQ,YAAUb,UAAV,GAAqB,GAArB,GAAyBV,UAAjC,EAA6CiD,IAA7C,CAAmD3B,QAAD,IAAc;AAC/D,YAAGA,QAAQ,CAACuB,MAAT,KAAoB,GAAvB,EAA2B;AAC1B,cAAGvB,QAAQ,CAACK,IAAZ,EAAiB;AAChBZ,YAAAA,SAAS,CAACO,QAAQ,CAACK,IAAT,CAAc,CAAd,CAAD,CAAT;AACAV,YAAAA,gBAAgB,CAACK,QAAQ,CAACK,IAAT,CAAc,CAAd,EAAiBuB,cAAlB,CAAhB;AACA;AACD;AACD,OAPD,EAOGC,KAPH,CAOUT,KAAD,IAAW;AACnBtB,QAAAA,KAAK,CAACsB,KAAN,CAAY,4DAAZ;AACA,OATD;AAUA,KAXD,MAWK;AACJtB,MAAAA,KAAK,CAACsB,KAAN,CAAY,6CAAZ;AACA;AACD,GAfC;;AAiBF,QAAMU,UAAU,GAAG,YAAY;AAC9B;AACA,QAAG;AACF,YAAM9B,QAAQ,GAAG,MAAMhC,GAAG,CAAC+D,GAAJ,CAAQ,aAAR,EAAuB;AAAEpD,QAAAA,QAAQ,EAAEA,QAAZ;AAAsBqD,QAAAA,SAAS,EAAEtD;AAAjC,OAAvB,CAAvB;AACA,aAAOsB,QAAQ,CAACuB,MAAT,KAAoB,GAApB,GAA0B,IAA1B,GAA+B,KAAtC;AACA,KAHD,CAGC,OAAMH,KAAN,EAAY;AACZtB,MAAAA,KAAK,CAACsB,KAAN,CAAY,mDAAZ;AACA;AACD,GARD;;AAUE,QAAMa,WAAW,GAAG,MAAOC,WAAP,IAAuB;AAC5C/C,IAAAA,cAAc,CAAC,IAAD,CAAd;;AACA,QAAG;AACFI,MAAAA,mBAAmB,CAAC,CAACD,gBAAF,CAAnB;AACA,UAAI6C,WAAW,GAAG,CAAlB;AACA,UAAIC,gBAAgB,GAAG,EAAvB;AACAtD,MAAAA,YAAY,CAACwB,OAAb,CAAsB+B,IAAD,IAAU;AAC9BF,QAAAA,WAAW,IAAIE,IAAI,CAAClC,KAApB;AACAiC,QAAAA,gBAAgB,CAAC1B,IAAjB,CAAsB2B,IAAI,CAAC1B,EAA3B;AACA,OAHD;AAIA,UAAI2B,OAAO,GAAI,QAAOJ,WAAW,CAACK,MAAO,QAAOL,WAAW,CAACM,cAAe,YAAWN,WAAW,CAACO,QAAS,EAA3G;AACG,YAAMC,mBAAmB,GAAG,MAAM1E,GAAG,CAAC2E,IAAJ,CAAS,aAAT,EAAwB;AACzDxC,QAAAA,KAAK,EAAEgC,WAAW,GAAGzC,aADoC;AAEzDkD,QAAAA,WAAW,EAAET,WAAW,GAAGzC,aAF8B;AAGzDmD,QAAAA,YAAY,EAAE,CAH2C;AAIzDC,QAAAA,MAAM,EAAE,KAJiD;AAKzDjC,QAAAA,WAAW,EAAEqB,WAAW,CAACrB,WAAZ,IAA2B,IALiB;AAMzDkC,QAAAA,cAAc,EAAEC,MAAM,CAACV,OAAD,CANmC;AAOzDW,QAAAA,YAAY,EAAEf,WAAW,CAAC1C,MAAZ,GAAqB0C,WAAW,CAAC1C,MAAZ,CAAmB0D,SAAxC,GAAkD1D,MAAM,GAAGA,MAAM,CAAC0D,SAAV,GAAoB,IAPjC;AAQzDC,QAAAA,YAAY,EAAExE,QAR2C;AASzDyE,QAAAA,UAAU,EAAE1E,UAT6C;AAUzD2E,QAAAA,cAAc,EAAE,CAACnB,WAAW,CAACoB,YAAb;AAVyC,OAAxB,CAAlC;;AAYA,UAAGZ,mBAAmB,CAACnB,MAApB,KAA+B,GAAlC,EAAsC;AACrC,cAAMgC,OAAO,GAAGb,mBAAmB,CAACrC,IAApB,CAAyBmD,QAAzC;AACA,cAAMC,oBAAoB,GAAG,MAAMzF,GAAG,CAAC2E,IAAJ,CAAS,qBAAT,EACrC;AACCa,UAAAA,QAAQ,EAAED,OADX;AAECH,UAAAA,UAAU,EAAE1E,UAFb;AAGCgF,UAAAA,YAAY,EAAEtB;AAHf,SADqC,CAAnC;;AAOH,YAAGqB,oBAAoB,CAAClC,MAArB,KAAgC,GAAnC,EAAuC;AACtC,gBAAMoC,GAAG,GAAG,MAAM7B,UAAU,EAA5B;AACA3C,UAAAA,cAAc,CAAC,KAAD,CAAd;;AACA,cAAGwE,GAAH,EAAO;AACN7D,YAAAA,KAAK,CAAC0B,OAAN,CAAc,kEAAd;AACAoC,YAAAA,UAAU,CAAC,MAAM;AACDC,cAAAA,MAAM,CAACC,QAAP,CAAgBC,IAAhB,GAAuB,UAAvB;AACH,aAFH,EAEK,IAFL,CAAV;AAGA,WALD,MAKK;AACJjE,YAAAA,KAAK,CAACsB,KAAN,CAAY,2CAAZ;AACA;AACD,SAXD,MAWK;AACJjC,UAAAA,cAAc,CAAC,KAAD,CAAd;AACAW,UAAAA,KAAK,CAACsB,KAAN,CAAY,2CAAZ;AACA;AACE,OAxBD,MAwBK;AACJjC,QAAAA,cAAc,CAAC,KAAD,CAAd;AACAW,QAAAA,KAAK,CAACsB,KAAN,CAAY,2CAAZ;AACA;AACJ,KAjDD,CAiDE,OAAMA,KAAN,EAAY;AACbjC,MAAAA,cAAc,CAAC,KAAD,CAAd;AACAW,MAAAA,KAAK,CAACsB,KAAN,CAAY,2CAAZ;AACA;AACC,GAvDD;;AAyDF,sBACC;AAAA,cAEE,CAAClC,WAAD,gBACC;AAAA,8BACC,QAAC,MAAD;AAAA;AAAA;AAAA;AAAA,cADD,eAEC,QAAC,MAAD;AAAQ,QAAA,KAAK,EAAE;AAAf;AAAA;AAAA;AAAA;AAAA,cAFD,eAGC;AAAA,gCACC;AAAK,UAAA,SAAS,EAAC,wCAAf;AAAA,iCACM;AAAK,YAAA,SAAS,EAAC,mBAAf;AAAA,mCACE;AAAK,cAAA,SAAS,EAAC,iBAAf;AAAA,wBAEEJ,YAAY,CAACkF,MAAb,KAAwB,CAAxB,gBACC;AAAK,gBAAA,SAAS,EAAC,oCAAf;AAAA,uCACF;AAAK,kBAAA,SAAS,EAAC,qBAAf;AAAA,0CACC;AAAK,oBAAA,SAAS,EAAC,2BAAf;AAAA,4CACI;AAAK,sBAAA,SAAS,EAAC,gBAAf;AAAA,8CACC;AAAI,wBAAA,SAAS,EAAC,qDAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8BADD,eAEC;AAAI,wBAAA,SAAS,EAAC,6EAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8BAFD,eAGC;AAAI,wBAAA,SAAS,EAAC,6EAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8BAHD,eAIC;AAAI,wBAAA,SAAS,EAAC,6EAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8BAJD,eAKL;AAAI,wBAAA,SAAS,EAAC,6EAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8BALK;AAAA;AAAA;AAAA;AAAA;AAAA,4BADJ,EASKlF,YAAY,CAACmF,GAAb,CAAiB,CAAC1D,OAAD,EAAU2D,KAAV,kBAChB;AAAiB,sBAAA,SAAS,EAAC,qDAA3B;AAAA,8CACG;AAAK,wBAAA,SAAS,EAAC,YAAf;AAAA,gDACE;AAAK,0BAAA,SAAS,EAAC,MAAf;AAAA,iDACE;AAAK,4BAAA,SAAS,EAAC,WAAf;AAA2B,4BAAA,GAAG,EAAE3D,OAAO,CAACU,KAAxC;AAA+C,4BAAA,GAAG,EAAC;AAAnD;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,gCADF,eAIE;AAAK,0BAAA,SAAS,EAAC,oCAAf;AAAA,kDACE;AAAG,4BAAA,SAAS,EAAC,mBAAb;AAAA,sCAAkCV,OAAO,CAACK;AAA1C;AAAA;AAAA;AAAA;AAAA,kCADF,eAEE;AAAQ,4BAAA,OAAO,EAAE,MAAMS,cAAc,CAACd,OAAO,CAACI,EAAT,CAArC;AAAmD,4BAAA,SAAS,EAAC,6DAA7D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kCAFF;AAAA;AAAA;AAAA;AAAA;AAAA,gCAJF;AAAA;AAAA;AAAA;AAAA;AAAA,8BADH,eAUC;AAAK,wBAAA,SAAS,EAAC,2BAAf;AAAA,+CACI;AAAG,0BAAA,SAAS,EAAC,gCAAb;AAAA,oCACEJ,OAAO,CAACH;AADV;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,8BAVD,eAeC;AAAM,wBAAA,SAAS,EAAC,yCAAhB;AAAA,0CAA8DtC,mBAAmB,CAACyC,OAAO,CAACJ,KAAR,GAAgBI,OAAO,CAACH,QAAzB,CAAjF;AAAA;AAAA;AAAA;AAAA;AAAA,8BAfD,eAgBC;AAAM,wBAAA,SAAS,EAAC,yCAAhB;AAAA,0CAA8DtC,mBAAmB,CAACyC,OAAO,CAACJ,KAAT,CAAjF;AAAA;AAAA;AAAA;AAAA;AAAA,8BAhBD;AAAA,uBAAU+D,KAAV;AAAA;AAAA;AAAA;AAAA,4BADD,CATL,eA8BI;AAAG,sBAAA,IAAI,EAAC,OAAR;AAAgB,sBAAA,SAAS,EAAC,kDAA1B;AAAA,8CACE;AAAK,wBAAA,SAAS,EAAC,uCAAf;AAAuD,wBAAA,OAAO,EAAC,aAA/D;AAAA,+CAA6E;AAAM,0BAAA,CAAC,EAAC;AAAR;AAAA;AAAA;AAAA;AAAA;AAA7E;AAAA;AAAA;AAAA;AAAA,8BADF;AAAA;AAAA;AAAA;AAAA;AAAA,4BA9BJ;AAAA;AAAA;AAAA;AAAA;AAAA,0BADD,eAqCC;AAAK,oBAAA,EAAE,EAAC,SAAR;AAAkB,oBAAA,SAAS,EAAC,kBAA5B;AAAA,4CACI;AAAI,sBAAA,SAAS,EAAC,sCAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4BADJ,eAEI;AAAK,sBAAA,SAAS,EAAC,iCAAf;AAAA,8CACG;AAAM,wBAAA,SAAS,EAAC,uBAAhB;AAAA,+CAAiDtE,gBAAjD;AAAA;AAAA;AAAA;AAAA;AAAA,8BADH,eAEG;AAAM,wBAAA,SAAS,EAAC,uBAAhB;AAAA,0CAA4C9B,mBAAmB,CAACkB,UAAD,CAA/D;AAAA;AAAA;AAAA;AAAA;AAAA,8BAFH;AAAA;AAAA;AAAA;AAAA;AAAA,4BAFJ,eAMI;AAAK,sBAAA,SAAS,EAAC,MAAf;AAAA,8CACC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8BADD,eAEG;AACU,wBAAA,IAAI,EAAC,MADf;AAEW,wBAAA,SAAS,EAAC,6DAFrB;AAGW,wBAAA,WAAW,EAAC,OAHvB;AAIW,wBAAA,QAAQ,EAAGmF,CAAD,IAAO9E,aAAa,CAAC8E,CAAC,CAACC,MAAF,CAASC,KAAV;AAJzC;AAAA;AAAA;AAAA;AAAA,8BAFH,EASc3E,aAAa,KAAK,CAAlB,iBACC;AAAK,wBAAA,SAAS,EAAC,OAAf;AAAA,+CACC;AAAG,0BAAA,SAAS,EAAC,kCAAb;AAAA,0EAC6B5B,mBAAmB,CAAC4B,aAAD,CADhD;AAAA;AAAA;AAAA;AAAA;AAAA;AADD;AAAA;AAAA;AAAA;AAAA,8BAVf;AAAA;AAAA;AAAA;AAAA;AAAA,4BANJ,eAwBI;AAAQ,sBAAA,SAAS,EAAC,sDAAlB;AAAyE,sBAAA,OAAO,EAAEgC,mBAAlF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4BAxBJ,eA2BI;AAAK,sBAAA,SAAS,EAAC,eAAf;AAAA,8CACE;AAAK,wBAAA,SAAS,EAAC,iDAAf;AAAA,gDACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gCADF,eAEE;AAAA,4CAAU5D,mBAAmB,CAACkB,UAAU,GAAGU,aAAd,CAA7B;AAAA;AAAA;AAAA;AAAA;AAAA,gCAFF;AAAA;AAAA;AAAA;AAAA;AAAA,8BADF,eAKE;AACC,wBAAA,SAAS,EAAC,wDADX;AAEC,wBAAA,OAAO,EAAE,MAAMH,mBAAmB,CAAC,IAAD,CAFnC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8BALF;AAAA;AAAA;AAAA;AAAA;AAAA,4BA3BJ;AAAA;AAAA;AAAA;AAAA;AAAA,0BArCD;AAAA;AAAA;AAAA;AAAA;AAAA;AADE;AAAA;AAAA;AAAA;AAAA,sBADD,gBAmFC;AAAK,gBAAA,SAAS,EAAC,eAAf;AAAA,wCACU;AAAG,kBAAA,SAAS,EAAC,iDAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBADV,eAIY;AAAK,kBAAA,SAAS,EAAC,2BAAf;AAAA,yCACC;AAAA,2CACC;AAAK,sBAAA,GAAG,EAAEf,UAAV;AAAsB,sBAAA,SAAS,EAAC,wBAAhC;AAAyD,sBAAA,GAAG,EAAC,YAA7D;AAA0E,sBAAA,SAAS,EAAC;AAApF;AAAA;AAAA;AAAA;AAAA;AADD;AAAA;AAAA;AAAA;AAAA;AADD;AAAA;AAAA;AAAA;AAAA,wBAJZ;AAAA;AAAA;AAAA;AAAA;AAAA;AArFH;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA;AADN;AAAA;AAAA;AAAA;AAAA,gBADD,eAuGC,QAAC,kBAAD;AACC,UAAA,IAAI,EAAEc,gBADP;AAEC,UAAA,KAAK,EAAE,MAAMC,mBAAmB,CAAC,KAAD,CAFjC;AAGC,UAAA,aAAa,EAAGc,IAAD,IAAU4B,WAAW,CAAC5B,IAAD;AAHrC;AAAA;AAAA;AAAA;AAAA,gBAvGD;AAAA;AAAA;AAAA;AAAA;AAAA,cAHD,eAgHC,QAAC,MAAD;AAAA;AAAA;AAAA;AAAA,cAhHD;AAAA;AAAA;AAAA;AAAA;AAAA,YADD,gBAoHC,QAAC,OAAD;AAAS,MAAA,IAAI,EAAE;AAAf;AAAA;AAAA;AAAA;AAAA;AAtHH;AAAA;AAAA;AAAA;AAAA,UADD;AA4HA,CAhSD;;GAAM5B,Y;UAYSZ,Q;;;KAZTY,Y;AAiSN,eAAeA,YAAf","sourcesContent":["import React, { useState,  useEffect } from \"react\";\nimport { useAlert } from \"react-alert\";\nimport { changeCommaForPoint, getIdCompany } from \"../../helpers.js\";\nimport API from \"../../server/api.js\";\nimport Navbar from \"../../components/Navbar\";\nimport Loading from \"../../components/Loading\";\nimport ModalAddressClient from \"../../components/ModalAddressClient\";\nimport Header from \"../../components/Header\";\nimport Footer from \"../../components/Footer\";\nimport pie_default from \"../../images/pie.png\";\nimport empty_default from \"../../images/empty_product.jpeg\";\nimport empty_cart from \"../../images/empty-cart.png\";\nimport \"../../index.css\";\nconst ShoppingCart = () => {\n\tconst ID_COMPANY = getIdCompany();\n\tconst idClient =  localStorage.getItem('@masterpizza-delivery-app/id_client');\n\n\tconst [dataProducts, setDataProducts] = useState([]);\n\tconst [priceTotal, setPriceTotal] = useState(0);\n\tconst [loadingFlag, setLoadingFlag] = useState(false);\n\tconst [nameCoupom, setNameCoupom] = useState(null);\n\tconst [showModalAddress, setShowModalAddress] = useState(false);\n\tconst [coupom, setCoupom] = useState(null);\n\tconst [valueDiscount, setValueDiscount] = useState(0);\n\tconst [quantityItemCart, setQuantityItemCart] = useState(0);\n\tconst alert = useAlert();\n\n\tuseEffect(() => {\n\t\tsetLoadingFlag(true);\n\t\tgetCartProduct();\n\t\tsetLoadingFlag(false);\n\t}, []);\n\n\tconst getCartProduct = async () => {\n\t\tsetLoadingFlag(true);\n\t\ttry{\n\t\t\tconst response = await API.get(\"cart_product/\"+idClient+\"/\"+ID_COMPANY);\n\t\t\tlet array = [];\n\t\t\tlet price = 0;\n\t\t\tlet quantity = 0;\n\t\t\tresponse.data.forEach((product) => {\n\t\t\t\tif(product.id_product_fk && product.id_product_fk2){\n\t\t\t\t\tarray.push({\n\t\t\t\t\t\tid: product.id,\n\t\t\t\t\t\tname: product.observation,\n\t\t\t\t\t\tsize: product.size,\n\t\t\t\t\t\tprice: product.price_item_order,\n\t\t\t\t\t\tquantity: product.quantity_item,\n\t\t\t\t\t\timage: pie_default,\n\t\t\t\t\t\tis_product_mister: true\n\t\t\t\t\t})\n\t\t\t\t}else{\n\t\t\t\t\tarray.push({\n\t\t\t\t\t\tid: product.id,\n\t\t\t\t\t\tname: product.name_product || product.name,\n\t\t\t\t\t\tsize: product.size,\n\t\t\t\t\t\tprice: product.price_item_order,\n\t\t\t\t\t\tquantity: product.quantity_item,\n\t\t\t\t\t\timage: product.image ? `https://api-master-pizza.herokuapp.com/${product.image}`:empty_default,\n\t\t\t\t\t\tis_product_mister: false\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tprice += product.price_item_order;\n\t\t\t\tquantity += product.quantity_item;\n\t\t\t})\n\t\t\tsetPriceTotal(price);\n\t\t\tsetQuantityItemCart(quantity);\n\t\t\tsetDataProducts(array);\n\t\t\tsetLoadingFlag(false);\n\t\t} catch(error){\n\t\t\tsetLoadingFlag(false);\n\t\t\talert.error('Erro ao tentar acessar carrinho. Tente novamente!');\n\t\t}\n\t}\n\n\tconst deleteItemCart = async (id) => {\n\t    setLoadingFlag(true);\n\t\ttry{\n\t\t    const response = await API.delete(\"cart_product/\"+id);\n\t\t    if(response.status === 200){\n\t\t    \tgetCartProduct();\n\t\t        setLoadingFlag(false);\n\t\t        alert.success(response.data.message);\n\t\t   \t}else{\n\t\t      \tsetLoadingFlag(false);\n\t\t        alert.error(response.data.message);\n\t\t    }\n\t\t}catch(error){\n\t\t    setLoadingFlag(false);\n\t\t    alert.error(\"Error ao tentar deletar item. Tente novamente!\");\n\t    }\n  \t}\n\n  \tconst getCoupomChangeName = async () => {\n\t\tif(nameCoupom){\n\t\t\tAPI.get(\"coupom/\"+nameCoupom+\"/\"+ID_COMPANY).then((response) => {\n\t\t\t\tif(response.status === 200){\n\t\t\t\t\tif(response.data){\n\t\t\t\t\t\tsetCoupom(response.data[0]);\n\t\t\t\t\t\tsetValueDiscount(response.data[0].value_discount)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}).catch((error) => {\n\t\t\t\talert.error(\"Erro de comunicação com o servidor ao tentar buscar cupom.\");\n\t\t\t});\n\t\t}else{\n\t\t\talert.error(\"Informe um cupom válido para poder aplicar!\");\n\t\t}\n\t}\n\n\tconst finishCart = async () => {\n\t\t//ATUALIZAR COLUNA -> completed_purchase\n\t\ttry{\n\t\t\tconst response = await API.put(\"cart_status\", { idClient: idClient, idCompany: ID_COMPANY });\n\t\t\treturn response.status === 200 ? true:false;\n\t\t}catch(error){\n\t\t\talert.error('Erro ao tentar finalizar pedido. Tente novamente!');\n\t\t}\n\t}\n\n  \tconst finishOrder = async (formAddress) => {\n\t\tsetLoadingFlag(true);\n\t\ttry{\n\t\t\tsetShowModalAddress(!showModalAddress);\n\t\t\tlet price_order = 0;\n\t\t\tlet arrayIdsProducts = [];\n\t\t\tdataProducts.forEach((item) => { \n\t\t\t\tprice_order += item.price;\n\t\t\t\tarrayIdsProducts.push(item.id);\n\t\t\t});\n\t\t\tlet address = `Rua: ${formAddress.street};N°: ${formAddress.number_address};Bairro: ${formAddress.district}`\n\t\t    const responseFinishOrder = await API.post(\"createOrder\", {\n\t\t\t    price: price_order - valueDiscount, \n\t\t\t    price_final: price_order - valueDiscount,\n\t\t\t    status_order: 0, \n\t\t\t    is_pdv: false, \n\t\t\t    observation: formAddress.observation || null, \n\t\t\t    address_client: String(address),\n\t\t\t    id_coupom_fk: formAddress.coupom ? formAddress.coupom.id_coupom:coupom ? coupom.id_coupom:null, \n\t\t\t    id_client_fk: idClient,\n\t\t\t    id_company: ID_COMPANY,\n\t\t\t    idsFormPayment: [formAddress.form_payment]\n\t\t    });\n\t\t    if(responseFinishOrder.status === 200){\n\t\t    \tconst idOrder = responseFinishOrder.data.id_order;\n\t\t    \tconst responseProductOrder = await API.post(\"createProductsOrder\",\n\t\t\t\t\t{\n\t\t\t\t\t\tid_order: idOrder,\n\t\t\t\t\t\tid_company: ID_COMPANY,\n\t\t\t\t\t\tids_products: arrayIdsProducts\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t\tif(responseProductOrder.status === 200){\n\t\t\t\t\tconst res = await finishCart();\n\t\t\t\t\tsetLoadingFlag(false);\n\t\t\t\t\tif(res){\n\t\t\t\t\t\talert.success('Pedido enviado com sucesso! Acompanhe o andamento no seu perfil.');\n\t\t\t\t\t\tsetTimeout(() => {\n\t\t                    window.location.href = \"/profile\";\n\t\t                }, 1000);\n\t\t\t\t\t}else{\n\t\t\t\t\t\talert.error('Erro no envio do pedido. Tente novamente!');\n\t\t\t\t\t}\t\n\t\t\t\t}else{\n\t\t\t\t\tsetLoadingFlag(false);\n\t\t\t\t\talert.error('Erro no envio do pedido. Tente novamente!');\n\t\t\t\t}\n\t\t    }else{\n\t\t    \tsetLoadingFlag(false);\n\t\t    \talert.error('Erro no envio do pedido. Tente novamente!');\n\t\t    }\n\t\t} catch(error){\n\t\t\tsetLoadingFlag(false);\n\t\t\talert.error('Erro no envio do pedido. Tente novamente!');\n\t\t}\n  \t}\n\n\treturn(\n\t\t<div>\n\t\t\t{\n\t\t\t\t!loadingFlag ? (\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<Navbar />\n\t\t\t\t\t\t<Header title={'Meu carrinho'} />\n\t\t\t\t\t\t<main>\n\t\t\t\t\t\t\t<div className=\"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8\">\n\t\t\t      \t\t\t\t<div className=\"px-4 py-6 sm:px-0\">\n\t\t\t        \t\t\t\t<div className=\"rounded-lg h-96\">\n\t\t\t\t        \t\t\t\t{\n\t\t\t\t        \t\t\t\t\tdataProducts.length !== 0 ? (\n\t\t\t\t        \t\t\t\t\t\t<div className=\"container mx-auto mb-0 bg-gray-100\">\n\t\t\t\t\t\t\t\t\t    \t\t\t<div className=\"flex shadow-md my-5\">\n\t\t\t\t\t\t\t\t\t\t\t    \t\t<div className=\"w-3/4 bg-white px-10 py-5\">\n\t\t\t\t\t\t\t\t\t\t\t\t        \t<div className=\"flex mt-5 mb-5\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t        <h3 className=\"font-semibold text-gray-600 text-xs uppercase w-2/5\">Produto</h3>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t        <h3 className=\"font-semibold text-center text-gray-600 text-xs uppercase w-1/5 text-center\">Quantidade</h3>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t        <h3 className=\"font-semibold text-center text-gray-600 text-xs uppercase w-1/5 text-center\">Preço</h3>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t        <h3 className=\"font-semibold text-center text-gray-600 text-xs uppercase w-1/5 text-center\">Total</h3>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<h3 className=\"font-semibold text-center text-gray-600 text-xs uppercase w-1/5 text-center\">Ações</h3>\n\t\t\t\t\t\t\t\t\t\t\t\t        \t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t        \t{\n\t\t\t\t\t\t\t\t\t\t\t\t        \t\tdataProducts.map((product, index) => (\n\t\t\t\t\t\t\t\t\t\t\t\t        \t\t\t<div key={index} className=\"flex items-center hover:bg-gray-100 -mx-8 px-6 py-5\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t          \t\t<div className=\"flex w-2/5\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t            <div className=\"w-20\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t              <img className=\"h-24 w-24\" src={product.image} alt=\"imgProduct\" />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t            </div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t            <div className=\"flex flex-col justify-between ml-5\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t              <p className=\"font-bold text-x1\">{product.name}</p>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t              <button onClick={() => deleteItemCart(product.id)} className=\"ml-5 font-semibold hover:text-red-500 text-gray-500 text-xs\">Remove</button>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t            </div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t          \t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t        <div className=\"flex justify-center w-1/5\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t            <p className=\"text-lg text-black text-center\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t            \t{product.quantity}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t            </p>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t        </div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t        <span className=\"text-center w-1/5 font-semibold text-sm\">R$ {changeCommaForPoint(product.price / product.quantity)}</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t        <span className=\"text-center w-1/5 font-semibold text-sm\">R$ {changeCommaForPoint(product.price)}</span>\n\t\t\t\t\t\t\t\t\t\t\t\t        \t\t\t</div> \n\t\t\t\t\t\t\t\t\t\t\t\t        \t\t))\n\t\t\t\t\t\t\t\t\t\t\t\t        \t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t        <a href=\"/menu\" className=\"flex font-semibold text-indigo-600 text-sm mt-10\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t          <svg className=\"fill-current mr-2 text-indigo-600 w-4\" viewBox=\"0 0 448 512\"><path d=\"M134.059 296H436c6.627 0 12-5.373 12-12v-56c0-6.627-5.373-12-12-12H134.059v-46.059c0-21.382-25.851-32.09-40.971-16.971L7.029 239.029c-9.373 9.373-9.373 24.569 0 33.941l86.059 86.059c15.119 15.119 40.971 4.411 40.971-16.971V296z\"/></svg>\n\t\t\t\t\t\t\t\t\t\t\t\t\t          Continuar comprando\n\t\t\t\t\t\t\t\t\t\t\t\t\t        </a>\n\t\t\t\t\t\t\t\t\t\t\t      \t\t</div>\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t    <div id=\"summary\" className=\"w-1/4 px-8 py-10\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t        <h1 className=\"font-semibold text-2xl border-b pb-5\">Resumo</h1>\n\t\t\t\t\t\t\t\t\t\t\t\t\t        <div className=\"flex justify-between mt-10 mb-2\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t          \t<span className=\"font-semibold text-sm\">Item(s) {quantityItemCart}</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t          \t<span className=\"font-semibold text-sm\">R$ {changeCommaForPoint(priceTotal)}</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t        </div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t        <div className=\"py-2\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t        \t<span>Possui cupom ?</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t          \t<input \n\t\t\t\t\t\t\t\t\t\t                      \t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\t\t                        \tclassName=\"mt-1 block border border-grey-light w-full p-2 rounded mb-1\"\n\t\t\t\t\t\t\t\t\t                        \t\tplaceholder=\"Cupom\"\n\t\t\t\t\t\t\t\t\t                        \t\tonChange={(e) => setNameCoupom(e.target.value)} \n\t\t\t\t\t\t\t\t\t                        \t/>\n\t\t\t\t\t\t\t\t\t                        \t{\n\t\t\t\t\t\t\t\t\t                        \t\tvalueDiscount !== 0 && (\n\t\t\t\t\t\t\t\t\t                        \t\t\t<div className=\"mt-10\">\n\t\t\t\t\t\t\t\t\t                        \t\t\t\t<p className=\"text-md text-black font-semibold\">\n\t\t\t\t\t\t\t\t\t                        \t\t\t\t\tVocê terá um desconto de R${changeCommaForPoint(valueDiscount)}\n\t\t\t\t\t\t\t\t\t                        \t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t                        \t\t\t</div>\n\t\t\t\t\t\t\t\t\t                        \t\t)\n\t\t\t\t\t\t\t\t\t                        \t}\t\t\t\t\t\t\t\t\t                        \t\n\t\t\t\t\t\t\t\t\t\t\t\t\t        </div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t        <button className=\"w-full text-center py-2 rounded-md bg-red text-white\" onClick={getCoupomChangeName}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t        \tAplicar\n\t\t\t\t\t\t\t\t\t\t\t\t\t        </button>\n\t\t\t\t\t\t\t\t\t\t\t\t\t        <div className=\"border-t mt-5\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t          <div className=\"flex font-semibold justify-between py-6 text-sm\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t            <span>Total da conta</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t            <span>R$ {changeCommaForPoint(priceTotal - valueDiscount)}</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t          </div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t          <button \n\t\t\t\t\t\t\t\t\t\t\t\t\t          \tclassName=\"bg-green w-full text-center py-2 rounded-md text-white\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t          \tonClick={() => setShowModalAddress(true)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t          >\n\t\t\t\t\t\t\t\t\t\t\t\t\t          \tFinalizar pedido\n\t\t\t\t\t\t\t\t\t\t\t\t\t          </button>\n\t\t\t\t\t\t\t\t\t\t\t\t\t        </div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t      </div>\n\t\t\t\t\t\t\t\t\t\t\t    \t\t</div>\n\t\t\t\t\t\t\t\t\t  \t\t\t\t\n\t\t\t        \t\t\t\t\t\t\t</div>\n\t\t\t\t        \t\t\t\t\t):(\n\t\t\t\t        \t\t\t\t\t\t<div className=\"w-full m-auto\">\n\t\t\t\t\t\t\t                    \t<p className=\"w-full text-center text-black font-bold text-xl\">\n\t\t\t\t\t\t\t                   \t\t\tSeu carrinho está vázio!\n\t\t\t\t\t\t\t                      \t</p>\n\t\t\t\t\t\t\t                      \t<div className=\"flex justify-center mt-10\">\n\t\t\t\t\t\t\t\t                      \t<div>\n\t\t\t\t\t\t\t\t                      \t\t<img src={empty_cart} className=\"rounded-full h-24 w-24\" alt=\"cart-empty\" className=\"h-16 w-16 mt-12\" />\n\t\t\t\t\t\t\t\t                   \t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t                    </div>\n\t\t\t\t        \t\t\t\t\t)\n\t\t\t\t        \t\t\t\t}\n\t\t\t      \t\t\t\t\t</div>\n\t\t\t   \t\t\t\t\t</div>\t\n\t\t\t   \t\t\t\t</div>\n\t\t\t\t\t\t\t<ModalAddressClient\n\t\t\t\t\t\t\t\tshow={showModalAddress}\n\t\t\t\t\t\t\t\tclose={() => setShowModalAddress(false)}\n\t\t\t\t\t\t\t\tonFinishOrder={(data) => finishOrder(data)}\n\t\t\t\t\t\t\t/>\t\t\t\t\t\n\t\t\t\t\t\t</main>\n\t\t\t\t\t\t<Footer />\n\t\t\t\t\t</div>\n\t\t\t\t):(\n\t\t\t\t\t<Loading time={5000}/>\n\t\t\t\t)\n\t\t\t}\n  \t\t</div>\n\t);\n}\nexport default ShoppingCart;"]},"metadata":{},"sourceType":"module"}