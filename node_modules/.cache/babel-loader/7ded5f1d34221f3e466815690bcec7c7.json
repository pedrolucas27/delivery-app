{"ast":null,"code":"var _jsxFileName = \"/home/pedro/Documentos/projects/master-pizza/delivery-app-v2/src/pages/Profile/index.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\"; //import socket from \"socket.io\";\n\nimport { useAlert } from 'react-alert';\nimport API from \"../../server/api.js\";\nimport { getIdCompany } from \"../../helpers.js\";\nimport { isLoggedIn } from \"../../server/auth.js\";\nimport Navbar from \"../../components/Navbar\";\nimport Header from \"../../components/Header\";\nimport Footer from \"../../components/Footer\";\nimport ShoppingCartMobile from \"../../components/ShoppingCart\";\nimport Loading from \"../../components/Loading\";\nimport CardProfile from \"../../components/CardProfile\";\nimport LineOrder from \"../../components/LineOrder\";\nimport ModalDetailOrder from \"../../components/ModalDetailOrder\";\nimport \"../../index.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Profile = () => {\n  _s();\n\n  const ID_COMPANY = getIdCompany();\n  const idClient = localStorage.getItem('@masterpizza-delivery-app/id_client');\n  const [openCart, setOpenCart] = useState(false);\n  const [showDetail, setShowDetail] = useState(false);\n  const [loadingFlag, setLoadingFlag] = useState(false);\n  const [logged, setLogged] = useState(false);\n  const [dataOrders, setDataOrders] = useState([]);\n  const [dataOrderDetail, setDataOrderDetail] = useState([]);\n  const [dataUser, setDataUser] = useState(\"\");\n  const [tab, setTab] = useState(1);\n  const tabs = [{\n    name: \"Meus dados\",\n    id: 1\n  }, {\n    name: \"Meu pedidos\",\n    id: 2\n  }];\n  const alert = useAlert();\n  useEffect(() => {\n    setLoadingFlag(true);\n    isLoggedIn().then(response => {\n      setLogged(response);\n\n      if (response) {\n        loadingDataUser();\n        loadingDataOrder();\n      }\n    }).catch(error => {\n      setLogged(false);\n    });\n    setTimeout(() => {\n      setLoadingFlag(false);\n    }, 2000);\n  }, []);\n\n  const loadingDataOrder = () => {\n    API.get(\"order-delivery-app/\" + idClient + \"/\" + ID_COMPANY).then(response => {\n      var _response$data;\n\n      let array = [];\n      (_response$data = response.data) === null || _response$data === void 0 ? void 0 : _response$data.forEach(item => {\n        array.push(item);\n      });\n      console.log(array);\n      setDataOrders(array);\n    }).catch(error => {\n      setLoadingFlag(false);\n      alert.error('Erro no carragamento dos pedidos!');\n    });\n  };\n\n  const loadingDataUser = () => {\n    API.get(\"client/profile/\" + idClient + \"/\" + ID_COMPANY).then(response => {\n      setDataUser(response.data[0]);\n    }).catch(error => {\n      setLoadingFlag(false);\n      alert.error('Erro no carragamento dos dados do usuário!');\n    });\n  };\n\n  const updateDataUser = async data => {\n    setLoadingFlag(true);\n\n    if (data.phone_client.length === 15 && data.name_client.length > 1) {\n      if (data.email_client.includes('@') && data.email_client.includes('.')) {\n        API.put(\"client\", data).then(response => {\n          setLoadingFlag(false);\n\n          if (response.status === 200) {\n            alert.success(response.data.message);\n            window.location.href = \"/profile\";\n          } else {\n            alert.error(response.data.message);\n          }\n        }).catch(error => {\n          setLoadingFlag(false);\n          alert.error(\"Erro ao tentar fazer o cadastro!\");\n        });\n      } else {\n        setLoadingFlag(false);\n        alert.error(\"Informe um e-mail válido!\");\n      }\n    } else {\n      setLoadingFlag(false);\n      alert.error(\"Preencha todos os campos pedidos!\");\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: loadingFlag ? /*#__PURE__*/_jsxDEV(Loading, {\n      time: 5000\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 6\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(Navbar, {\n        clickCartMobile: () => setOpenCart(!openCart)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(Header, {\n        title: 'Meu perfil'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"px-4 py-6 sm:px-0\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"rounded-lg h-96\",\n              children: [/*#__PURE__*/_jsxDEV(\"ul\", {\n                className: \"flex\",\n                children: tabs.map(t => /*#__PURE__*/_jsxDEV(\"li\", {\n                  className: \"mr-3\",\n                  children: /*#__PURE__*/_jsxDEV(\"button\", {\n                    className: t.id === tab ? \"inline-block border border-blue-500 rounded py-1 px-3 bg-blue-500 text-white\" : \"inline-block border border-white rounded text-blue-500 py-1 px-3\",\n                    onClick: () => setTab(t.id),\n                    children: t.name\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 119,\n                    columnNumber: 15\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 118,\n                  columnNumber: 14\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 115,\n                columnNumber: 11\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"w-full\",\n                children: tab === 1 ? /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"mt-10 container max-w-sm mx-auto flex-1 flex flex-col items-center justify-center px-2\",\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"bg-white px-6 py-4 rounded shadow-md text-black w-full\",\n                    children: /*#__PURE__*/_jsxDEV(CardProfile, {\n                      user: dataUser,\n                      updateDataClient: data => updateDataUser(data)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 140,\n                      columnNumber: 16\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 139,\n                    columnNumber: 15\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 138,\n                  columnNumber: 14\n                }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"mt-10 flex flex-col\",\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"-my-2 overflow-x-auto sm:-mx-6 lg:-mx-8\",\n                    children: /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"py-2 align-middle inline-block min-w-full sm:px-6 lg:px-8\",\n                      children: /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"shadow overflow-hidden border-b border-gray-200 sm:rounded-lg\",\n                        children: /*#__PURE__*/_jsxDEV(\"table\", {\n                          className: \"min-w-full divide-y divide-gray-200\",\n                          children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n                            className: \"bg-gray-50\",\n                            children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                              children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                                scope: \"col\",\n                                className: \"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",\n                                children: \"Pedido\"\n                              }, void 0, false, {\n                                fileName: _jsxFileName,\n                                lineNumber: 154,\n                                columnNumber: 21\n                              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                                scope: \"col\",\n                                className: \"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",\n                                children: \"Status\"\n                              }, void 0, false, {\n                                fileName: _jsxFileName,\n                                lineNumber: 160,\n                                columnNumber: 21\n                              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                                scope: \"col\",\n                                className: \"relative px-6 py-3\",\n                                children: /*#__PURE__*/_jsxDEV(\"span\", {\n                                  className: \"sr-only\",\n                                  children: \"A\\xE7\\xE3o\"\n                                }, void 0, false, {\n                                  fileName: _jsxFileName,\n                                  lineNumber: 167,\n                                  columnNumber: 22\n                                }, this)\n                              }, void 0, false, {\n                                fileName: _jsxFileName,\n                                lineNumber: 166,\n                                columnNumber: 21\n                              }, this)]\n                            }, void 0, true, {\n                              fileName: _jsxFileName,\n                              lineNumber: 153,\n                              columnNumber: 20\n                            }, this)\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 152,\n                            columnNumber: 19\n                          }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n                            className: \"bg-white divide-y divide-gray-200\",\n                            children: dataOrders.map(order => /*#__PURE__*/_jsxDEV(LineOrder, {\n                              order: order,\n                              showDetailOrder: () => {\n                                setDataOrderDetail(order);\n                                setShowDetail(!showDetail);\n                              }\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 173,\n                              columnNumber: 21\n                            }, this))\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 171,\n                            columnNumber: 19\n                          }, this)]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 151,\n                          columnNumber: 18\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 150,\n                        columnNumber: 17\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 149,\n                      columnNumber: 16\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 148,\n                    columnNumber: 15\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 147,\n                  columnNumber: 14\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 135,\n                columnNumber: 11\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 113,\n              columnNumber: 10\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 112,\n            columnNumber: 9\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 8\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(ShoppingCartMobile, {\n        open: openCart,\n        close: () => setOpenCart(false),\n        onLoading: flag => setLoadingFlag(flag),\n        idClient: logged ? localStorage.getItem('@masterpizza-delivery-app/id_client') : null,\n        idCompany: logged ? ID_COMPANY : null,\n        logged: logged\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(ModalDetailOrder, {\n        products: dataOrderDetail.products,\n        additionals: dataOrderDetail.additionals,\n        showModalDetail: showDetail,\n        closeDetail: () => setShowDetail(!showDetail)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 203,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 6\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 102,\n    columnNumber: 3\n  }, this);\n};\n\n_s(Profile, \"kpAL1GNCyHt0OqXvJH25IQ05iwE=\", false, function () {\n  return [useAlert];\n});\n\n_c = Profile;\nexport default Profile;\n\nvar _c;\n\n$RefreshReg$(_c, \"Profile\");","map":{"version":3,"sources":["/home/pedro/Documentos/projects/master-pizza/delivery-app-v2/src/pages/Profile/index.js"],"names":["React","useState","useEffect","useAlert","API","getIdCompany","isLoggedIn","Navbar","Header","Footer","ShoppingCartMobile","Loading","CardProfile","LineOrder","ModalDetailOrder","Profile","ID_COMPANY","idClient","localStorage","getItem","openCart","setOpenCart","showDetail","setShowDetail","loadingFlag","setLoadingFlag","logged","setLogged","dataOrders","setDataOrders","dataOrderDetail","setDataOrderDetail","dataUser","setDataUser","tab","setTab","tabs","name","id","alert","then","response","loadingDataUser","loadingDataOrder","catch","error","setTimeout","get","array","data","forEach","item","push","console","log","updateDataUser","phone_client","length","name_client","email_client","includes","put","status","success","message","window","location","href","map","t","order","flag","products","additionals"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\n//import socket from \"socket.io\";\nimport { useAlert } from 'react-alert';\nimport API from \"../../server/api.js\"\nimport { getIdCompany } from \"../../helpers.js\";\nimport { isLoggedIn } from \"../../server/auth.js\";\nimport Navbar from \"../../components/Navbar\";\nimport Header from \"../../components/Header\";\nimport Footer from \"../../components/Footer\";\nimport ShoppingCartMobile from \"../../components/ShoppingCart\";\nimport Loading from \"../../components/Loading\";\nimport CardProfile from \"../../components/CardProfile\";\nimport LineOrder from \"../../components/LineOrder\";\nimport ModalDetailOrder from \"../../components/ModalDetailOrder\";\nimport \"../../index.css\";\n\nconst Profile = () => {\n\tconst ID_COMPANY = getIdCompany();\n\tconst idClient = localStorage.getItem('@masterpizza-delivery-app/id_client');\n\n\tconst [openCart, setOpenCart] = useState(false);\n\tconst [showDetail, setShowDetail] = useState(false);\n\tconst [loadingFlag, setLoadingFlag] = useState(false);\n\tconst [logged, setLogged] = useState(false);\n\tconst [dataOrders, setDataOrders] = useState([]);\n\tconst [dataOrderDetail, setDataOrderDetail] = useState([]);\n\tconst [dataUser, setDataUser] = useState(\"\");\n\tconst [tab, setTab] = useState(1);\n\tconst tabs = [\n\t\t{ name: \"Meus dados\", id: 1 },\n\t\t{ name: \"Meu pedidos\", id: 2 }\n\t]\n\tconst alert = useAlert();\n\n\tuseEffect(() => {\n\t\tsetLoadingFlag(true);\n\t\tisLoggedIn().then((response) => {\n\t\t\tsetLogged(response);\n\t\t\tif (response) {\n\t\t\t\tloadingDataUser();\n\t\t\t\tloadingDataOrder();\n\t\t\t}\n\t\t}).catch((error) => {\n\t\t\tsetLogged(false);\n\t\t});\n\t\tsetTimeout(() => {\n\t\t\tsetLoadingFlag(false);\n\t\t}, 2000);\n\t}, []);\n\n\tconst loadingDataOrder = () => {\n\t\tAPI.get(\"order-delivery-app/\" + idClient + \"/\" + ID_COMPANY).then((response) => {\n\t\t\tlet array = [];\n\t\t\tresponse.data?.forEach((item) => {\n\t\t\t\tarray.push(item);\n\t\t\t})\n\t\t\tconsole.log(array);\n\t\t\tsetDataOrders(array);\n\t\t}).catch((error) => {\n\t\t\tsetLoadingFlag(false);\n\t\t\talert.error('Erro no carragamento dos pedidos!');\n\t\t});\n\t}\n\n\tconst loadingDataUser = () => {\n\t\tAPI.get(\"client/profile/\" + idClient + \"/\" + ID_COMPANY).then((response) => {\n\t\t\tsetDataUser(response.data[0]);\n\t\t}).catch((error) => {\n\t\t\tsetLoadingFlag(false);\n\t\t\talert.error('Erro no carragamento dos dados do usuário!');\n\t\t});\n\t}\n\n\tconst updateDataUser = async (data) => {\n\t\tsetLoadingFlag(true);\n\t\tif (data.phone_client.length === 15 && data.name_client.length > 1) {\n\t\t\tif ((data.email_client.includes('@')) && (data.email_client.includes('.'))) {\n\t\t\t\tAPI.put(\"client\", data).then((response) => {\n\t\t\t\t\tsetLoadingFlag(false);\n\t\t\t\t\tif (response.status === 200) {\n\t\t\t\t\t\talert.success(response.data.message);\n\t\t\t\t\t\twindow.location.href = \"/profile\";\n\t\t\t\t\t} else {\n\t\t\t\t\t\talert.error(response.data.message);\n\t\t\t\t\t}\n\t\t\t\t}).catch((error) => {\n\t\t\t\t\tsetLoadingFlag(false);\n\t\t\t\t\talert.error(\"Erro ao tentar fazer o cadastro!\");\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tsetLoadingFlag(false);\n\t\t\t\talert.error(\"Informe um e-mail válido!\");\n\t\t\t}\n\t\t} else {\n\t\t\tsetLoadingFlag(false);\n\t\t\talert.error(\"Preencha todos os campos pedidos!\");\n\t\t}\n\t}\n\n\n\treturn (\n\t\t<div>\n\t\t\t{\n\t\t\t\tloadingFlag ? (\n\t\t\t\t\t<Loading time={5000} />\n\t\t\t\t) : (\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<Navbar clickCartMobile={() => setOpenCart(!openCart)} />\n\t\t\t\t\t\t<Header title={'Meu perfil'} />\n\t\t\t\t\t\t<main>\n\t\t\t\t\t\t\t<div className=\"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8\">\n\t\t\t\t\t\t\t\t<div className=\"px-4 py-6 sm:px-0\">\n\t\t\t\t\t\t\t\t\t<div className=\"rounded-lg h-96\">\n\n\t\t\t\t\t\t\t\t\t\t<ul className=\"flex\">\n\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\ttabs.map((t) => (\n\t\t\t\t\t\t\t\t\t\t\t\t\t<li className=\"mr-3\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tt.id === tab ?\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"inline-block border border-blue-500 rounded py-1 px-3 bg-blue-500 text-white\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"inline-block border border-white rounded text-blue-500 py-1 px-3\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => setTab(t.id)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{t.name}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\t\t\t\t))\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t</ul>\n\n\t\t\t\t\t\t\t\t\t\t<div className=\"w-full\">\n\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\ttab === 1 ? (\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"mt-10 container max-w-sm mx-auto flex-1 flex flex-col items-center justify-center px-2\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"bg-white px-6 py-4 rounded shadow-md text-black w-full\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<CardProfile\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tuser={dataUser}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tupdateDataClient={(data) => updateDataUser(data)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"mt-10 flex flex-col\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"-my-2 overflow-x-auto sm:-mx-6 lg:-mx-8\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"py-2 align-middle inline-block min-w-full sm:px-6 lg:px-8\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"shadow overflow-hidden border-b border-gray-200 sm:rounded-lg\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<table className=\"min-w-full divide-y divide-gray-200\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<thead className=\"bg-gray-50\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<th\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tscope=\"col\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tPedido\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<th\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tscope=\"col\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tStatus\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<th scope=\"col\" className=\"relative px-6 py-3\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"sr-only\">Ação</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</thead>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<tbody className=\"bg-white divide-y divide-gray-200\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{dataOrders.map((order) => (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<LineOrder\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\torder={order}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tshowDetailOrder={() => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetDataOrderDetail(order);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetShowDetail(!showDetail);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</tbody>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</table>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</main>\n\t\t\t\t\t\t<Footer />\n\t\t\t\t\t\t<ShoppingCartMobile\n\t\t\t\t\t\t\topen={openCart}\n\t\t\t\t\t\t\tclose={() => setOpenCart(false)}\n\t\t\t\t\t\t\tonLoading={(flag) => setLoadingFlag(flag)}\n\t\t\t\t\t\t\tidClient={logged ? localStorage.getItem('@masterpizza-delivery-app/id_client') : null}\n\t\t\t\t\t\t\tidCompany={logged ? ID_COMPANY : null}\n\t\t\t\t\t\t\tlogged={logged}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<ModalDetailOrder\n\t\t\t\t\t\t\tproducts={dataOrderDetail.products}\n\t\t\t\t\t\t\tadditionals={dataOrderDetail.additionals}\n\t\t\t\t\t\t\tshowModalDetail={showDetail}\n\t\t\t\t\t\t\tcloseDetail={() => setShowDetail(!showDetail)}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t)\n\t\t\t}\n\t\t</div>\n\t);\n}\nexport default Profile;"]},"metadata":{},"sourceType":"module"}